<h1>Cool graph frontend</h1>

<!-- container for graph -->
<div id="main" style="width: 100%; height: 100vh;"></div>

<!-- echarts - grapht visualization framework -->
<script src="/scripts/echarts.min.js"></script>
<!-- jquery why not if we do selectors -->
<script src="/scripts/jquery.min.js"></script>

<!-- graph data -->
<script>
    var legend = ['HTMLElement', 'WebGL', 'SVG', 'CSS', 'Other'];
    var graph = {
        "categories": [
            {
                "name": "HTMLElement",
                "keyword": {},
                "base": "HTMLElement"
            },
            {
                "name": "WebGL",
                "keyword": {},
                "base": "WebGLRenderingContext"
            },
            {
                "name": "SVG",
                "keyword": {},
                "base": "SVGElement"
            },
            {
                "name": "CSS",
                "keyword": {},
                "base": "CSSRule"
            },
            {
                "name": "Other",
                "keyword": {}
            }
        ],
        "nodes": [
            {
                "name": "AnalyserNode",
                "value": 1,
                "category": 4
            },
            {
                "name": "AudioNode",
                "value": 1,
                "category": 4
            },
            {
                "name": "Uint8Array",
                "value": 1,
                "category": 4
            },
            {
                "name": "Float32Array",
                "value": 1,
                "category": 4
            },
            {
                "name": "ArrayBuffer",
                "value": 1,
                "category": 4
            },
            {
                "name": "ArrayBufferView",
                "value": 1,
                "category": 4
            },
            {
                "name": "Attr",
                "value": 1,
                "category": 4
            },
            {
                "name": "Node",
                "value": 1,
                "category": 4
            },
        ],
        "edges": [
            {
                "source": 0,
                "target": 1
            },
            {
                "source": 0,
                "target": 2
            },
            {
                "source": 0,
                "target": 3
            },
            {
                "source": 4,
                "target": 4
            },
        ]
    }
</script>

<!-- visualization "engine", logic and settings are here -->
<script type="module">
    // import * as echarts from 'echarts';

    var ROOT_PATH = 'https://echarts.apache.org/examples';

    var chartDom = document.getElementById('main');
    var myChart = echarts.init(chartDom);
    var option;

    /// request example
    // myChart.showLoading();
    // $.get('https://cors-anywhere.herokuapp.com/' + ROOT_PATH + '/data/asset/data/webkit-dep.json', function (webkitDep) {
    // myChart.hideLoading();
    // });


    option = {
        legend: {
            data: legend,
        },
        series: [
            {
                type: 'graph',
                layout: 'force',
                animation: false,
                label: {
                    position: 'right',
                    formatter: '{b}'
                },
                draggable: true,
                data: graph.nodes.map(function (node, idx) {
                    node.id = idx;
                    return node;
                }),
                categories: graph.categories,
                force: {
                    edgeLength: 5,
                    repulsion: 20,
                    gravity: 0.2
                },
                edges: graph.edges
            }
        ]
    };
    myChart.setOption(option);

    option && myChart.setOption(option);

</script>
